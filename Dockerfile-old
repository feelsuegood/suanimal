FROM node:lts

ADD package.json package.json
ADD babel.config.json babel.config.json 
ADD nodemon.json nodemon.json
ADD webpack.config.js webpack.config.js
# Install app dependencies
RUN npm install

WORKDIR /src

# Install app dependencies
RUN npm install

# Expose port to outside world
EXPOSE 3000

# Start command as per the package.json file
CMD ["npm", "start"]

# Use the Node.js LTS image as a base
FROM node:lts

# Copy app source
COPY . /src

# Set working directory to /src
WORKDIR /src

# Install app dependencies
RUN npm install
RUN npm run dev
RUN npm run build

# Expose port to outside world
EXPOSE 3000

# Start command as per the package.json file
CMD ["npm", "run", "test"]